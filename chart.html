<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…ÙÙ‡ÙÙ† | Ø§Ù„Ø³Ù„Ø©</title>

<style>
:root{
  --bg:#e9e6e2;         /* Ù†ÙØ³ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠØ¯Ø± */
  --card:#fff;
  --text:#2d2d2d;
  --muted:#555;
  --chip:#E6D5B8;       /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„ÙØ§ØªØ­ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØ§Ø±Øª */
  --border:#8B4513;     /* Ø¥Ø·Ø§Ø± Ø¨Ù†ÙŠ */
  --accent:#5A8DA8;     /* Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ */
  --accent-hover:#4F7E97;
  --danger:#C62828;
  --danger-hover:#A61717;
  --radius:20px;
  --shadow:0 4px 12px rgba(0,0,0,.08);
  --shadow-lg:0 8px 20px rgba(0,0,0,.15);
}

*{box-sizing:border-box}
body{font-family:'Tajawal',Arial,sans-serif;background:var(--bg);margin:0;color:var(--text);display:flex;flex-direction:column;min-height:100vh}
.site-header {
    background: #d8d5d0;
    border-bottom: 2px solid #b9b6b2;
    padding: 15px 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    position: relative; /* Ø­ØªÙ‰ Ù†Ù‚Ø¯Ø± Ù†Ø«Ø¨Øª Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ */
  }

  .logo {
    width: 120px;
  }

   .logout-btn {
    position: absolute;
    right: 20px; /* Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
    top: 50%;
    transform: translateY(-50%);
  }
  .logout-btn img {
    width: 55px;
    height: 55px;
    cursor: pointer;
    transition: transform 0.3s;
  }

  .logout-btn img:hover {
    transform: scale(1.1);
  }
  
main{padding:24px;flex:1}

.page-title{display:flex;align-items:center;gap:10px;margin:0 0 18px;font-size:1.25rem;font-weight:800}
.back-link{color:var(--accent);text-decoration:none;font-weight:700}

.cart-wrap{display:grid;grid-template-columns:1fr 360px;gap:22px}
@media (max-width: 980px){ .cart-wrap{grid-template-columns:1fr} }

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù†ØµØ± */
.item-card{
  background:var(--card);
  border:2px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
  margin-bottom:16px;
  transition:.25s;
}
.item-card:hover{box-shadow:var(--shadow-lg);background:#F5F5DC}

.item-header{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.item-header h3{margin:0;font-size:1.1rem}
.item-emoji{font-size:22px}

.item-desc{color:var(--muted);margin:6px 0 10px}
.item-chip{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  background:var(--chip);padding:8px 12px;border-radius:12px;font-weight:700;color:#333
}

.item-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.btn{
  padding:10px 14px;border:none;border-radius:10px;cursor:pointer;
  font-weight:700;text-decoration:none;display:inline-block;text-align:center
}
.btn-blue{background:var(--accent);color:#fff}
.btn-blue:hover{background:var(--accent-hover)}
.btn-red{background:var(--danger);color:#fff}
.btn-red:hover{background:var(--danger-hover)}
.qty-box{display:flex;align-items:center;gap:8px}
.qty-input{width:70px;padding:8px;border:1px solid #ccc;border-radius:10px;text-align:center;font-weight:700}

/* Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„Ø¯ÙØ¹ */
.summary{
  background:var(--card);
  border:2px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
  height:fit-content;
}
.summary h4{margin:0 0 12px}
.total-row{display:flex;justify-content:space-between;font-weight:800;margin:10px 0 16px}
.pay-methods{display:grid;gap:8px;margin:10px 0 16px}
.pay-methods label{display:flex;align-items:center;gap:8px;cursor:pointer}
.info{background:#fff8e1;border:1px solid #f1df9a;color:#7a5d00;padding:10px;border-radius:10px;margin:10px 0;font-size:.95rem}

.empty{
  background:#fff;border:2px dashed #b9b6b2;border-radius:16px;padding:26px;text-align:center;
  color:#666
}
.back-link {
  position: absolute;
  left: 25px;
  top: 25px;
  font-size: 28px;
  color: #5A8DA8; /* Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ */
  text-decoration: none;
  font-weight: 800;
  transition: 0.2s;
}

.back-link:hover {
  color: #4F7E97;  /* Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„ØºØ§Ù…Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
  transform: translateX(-3px);
}

footer{
  background:#d8d5d0;border-top:2px solid #b9b6b2;padding:15px;text-align:center;
  color:#4b4b4b;font-size:15px;box-shadow:0 -2px 6px rgba(0,0,0,.05)
}
footer a{color:#3e3e3e;font-weight:bold;text-decoration:none}
.separator{margin:0 8px;color:#999}
</style>
</head>
<body>


<header class="site-header">

 <a href="services.html" class="back-link">â† </a>
  <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <img src="image/logo.jpg" alt="Ø´Ø¹Ø§Ø± Ù…ÙÙ‡ÙÙ†" class="logo">

  <!-- Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ -->
  <a href="index.html" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬" class="logout-btn">
    <img src="image/logout.png" alt="Ø®Ø±ÙˆØ¬">
  </a>


</header>

<main>
  <h1 class="page-title">ğŸ§º Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h1>

  <div class="cart-wrap">
    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± -->
    <section id="cartItems"></section>

    <!-- Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ -->
    <aside class="summary">
      <h4>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h4>
      <div class="total-row"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><span id="totalPrice">0 Ø±.Ø³</span></div>

      <div class="info">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø«Ù… Ø§Ø¶ØºØ· â€œØ¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹â€.</div>

      <div class="pay-methods" id="payMethods">
        <label><input type="radio" name="pm" value="mada"> Ù…Ø¯Ù‰</label>
        <label><input type="radio" name="pm" value="visa"> ÙÙŠØ²Ø§ / Ù…Ø§Ø³ØªØ±</label>
        <label><input type="radio" name="pm" value="apple"> Apple Pay</label>
        <label><input type="radio" name="pm" value="cod"> Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</label>
      </div>

      <button id="checkoutBtn" class="btn btn-blue" style="width:100%">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹</button>
    </aside>
  </div>
</main>

<footer>
  <a href="mailto:contact@mihn.sa">contact@mihn.sa</a>
  <span class="separator">â€¢</span>
  <span>Â© 2025 Ù…ÙÙ‡ÙÙ† â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</span>
</footer>

<script>
// ====================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ù„Ø© ======================
/*
Ù†ØªÙˆÙ‚Ø¹ Ø£Ù† ØµÙØ­Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª ØªØ¶ÙŠÙ Ø¹Ù†Ø§ØµØ± Ù„Ù„Ø³Ù„Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„:
cart = [{ id, title, price, time, emoji, qty }]
*/
const cartKey   = 'cart';
const ordersKey = 'orders';

function getCart(){ try{return JSON.parse(localStorage.getItem(cartKey)||'[]')}catch{return []} }
function setCart(items){ localStorage.setItem(cartKey, JSON.stringify(items)); }

function getOrders(){ try{return JSON.parse(localStorage.getItem(ordersKey)||'[]')}catch{return []} }
function setOrders(list){ localStorage.setItem(ordersKey, JSON.stringify(list)); }

// Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
const listEl  = document.getElementById('cartItems');
const totalEl = document.getElementById('totalPrice');
const payBox  = document.getElementById('payMethods');
const btnPay  = document.getElementById('checkoutBtn');

// Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ±
function renderCart(){
  const cart = getCart();
  listEl.innerHTML = '';

  if(cart.length === 0){
    listEl.innerHTML = `
      <div class="empty">
        Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠÙ‹Ø§. <br> Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø§Øª Ù…Ù† <a href="services.html" class="back-link">ØµÙØ­Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>.
      </div>
    `;
    totalEl.textContent = '0 Ø±.Ø³';
    return;
  }

  let total = 0;

  cart.forEach((it, idx)=>{
    total += (Number(it.price)||0) * (Number(it.qty)||1);

    const card = document.createElement('article');
    card.className = 'item-card';
    card.innerHTML = `
      <div class="item-header">
        <div class="item-emoji">${it.emoji || 'ğŸ§°'}</div>
        <h3>${it.title || 'Ø®Ø¯Ù…Ø©'}</h3>
      </div>

      ${it.description ? `<p class="item-desc">${it.description}</p>`: ''}

      <div class="item-chip">
        <span>â±ï¸ ${it.time || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
        <span>ğŸ’° ${it.price} Ø±.Ø³</span>
      </div>

      <div class="item-actions">
        <div class="qty-box">
          <label>Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
          <input class="qty-input" type="number" min="1" value="${it.qty || 1}" data-idx="${idx}">
        </div>
        <button class="btn btn-blue" data-action="save" data-idx="${idx}">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
        <button class="btn btn-red"  data-action="del"  data-idx="${idx}">Ø­Ø°Ù</button>
      </div>
    `;
    listEl.appendChild(card);
  });

  totalEl.textContent = `${total} Ø±.Ø³`;
}

// Ø­ÙØ¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ© / Ø­Ø°Ù
listEl.addEventListener('click', (e)=>{
  const btn = e.target.closest('button');
  if(!btn) return;

  const idx = Number(btn.getAttribute('data-idx'));
  let cart = getCart();

  if(btn.getAttribute('data-action') === 'del'){
    cart.splice(idx,1);
    setCart(cart);
    renderCart();
    return;
  }

  if(btn.getAttribute('data-action') === 'save'){
    const input = listEl.querySelector(`.qty-input[data-idx="${idx}"]`);
    let q = Number(input.value);
    if(isNaN(q) || q < 1) q = 1;
    cart[idx].qty = q;
    setCart(cart);
    renderCart();
    return;
  }
});

// Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹ -> ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ø§Ø´Ø± Ù„ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ­Ù‚Ù‚)
btnPay.addEventListener('click', () => {
  // Ù„Ùˆ ØªØ¨ØºÙŠÙ† Ø¨Ø³ ØªØ­ÙˆÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø´ØºÙ„:
  window.location.href = 'requests.html';  // Ø£Ùˆ requests.html Ø¥Ø°Ø§ Ù‡Ø°Ø§ Ø§Ø³Ù… ØµÙØ­ØªÙƒ
});

// Ø±Ø³Ù… Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø³Ù„Ø©
renderCart();

</script>
</body>
</html>

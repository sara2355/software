<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>مِهَن | الخدمات</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#e9e6e2;
    --card:#fff;
    --text:#2d2d2d;
    --muted:#555;
    --chip:#E6D5B8;
      --accent:#5A8DA8;          /* الأزرق الناعم */
  --accent-hover:#4F7E97; 
    --danger:#C62828;
    --danger-hover:#A61717;
    --border:#8B4513;         /* البني الغامق مثل البروفايدر */
    --radius:20px;
    --shadow:0 4px 12px rgba(0,0,0,.08);
  }
.site-header {
    background: #d8d5d0;
    border-bottom: 2px solid #b9b6b2;
    padding: 15px 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    position: relative; /* حتى نقدر نثبت زر الخروج */
  }

  .logo {
    width: 120px;
  }

   .logout-btn {
    position: absolute;
    right: 20px; /* أقصى اليمين */
    top: 50%;
    transform: translateY(-50%);
  }
  .logout-btn img {
    width: 55px;
    height: 55px;
    cursor: pointer;
    transition: transform 0.3s;
  }

  .logout-btn img:hover {
    transform: scale(1.1);
  }
      background: #d8d5d0;
    border-bottom: 2px solid #b9b6b2;
    padding: 15px 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }
  .logo {
    width: 120px;
  }
  .logout-btn {
    position: absolute;
    right: 20px; /* أقصى اليمين */
    top: 50%;
    transform: translateY(-50%);
  }
    .logout-btn img {
    width: 55px;
    height: 55px;
    cursor: pointer;
    transition: transform 0.3s;
  }

  .logout-btn img:hover {
    transform: scale(1.1);
  }
  
  *{box-sizing:border-box}
  body{font-family:"Tajawal",sans-serif;background:var(--bg);margin:0;color:var(--text);}
  header{padding:14px 18px;background:#f5f5f5;border-bottom:1px solid #d9d6d2}
  header .brand img{width:100px}
  main{padding:24px;max-width:1200px;margin:auto}

  /* شريط علوي: بحث + فلاتر + سلة */
  /* أزرار البحث وقائمة الطلبات */
.toolbar button,
.cart-btn.orders {
  background-color: #5A8DA8;         /* نفس لون عرض التفاصيل */
  color: #fff;
  font-family: "Tajawal", sans-serif;
  font-weight: 700;
  border: none;
  border-radius: 10px;
  padding: 10px 18px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.toolbar button:hover,
.cart-btn.orders:hover {
  background-color: #4F7E97;        /* درجة أغمق عند المرور */
}
/* توحيد الخط في شريط البحث والفلاتر */
.toolbar, 
.toolbar input, 
.toolbar select, 
.toolbar button {
  font-family: "Tajawal", sans-serif;
  font-weight: 700;       /* نفس الوزن الموجود في عرض التفاصيل */
  font-size: 15px;
  color: #2d2d2d;
}

  .cart-btn{
    padding:10px 14px;border-radius:12px;background:#2d2d2d;color:#fff;text-decoration:none;font-weight:800;display:inline-flex;align-items:center;gap:8px
  }
  .badge{background:#ff5252;color:#fff;border-radius:999px;padding:2px 8px;font-size:.85rem}

  /* شبكة البطاقات */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:22px}
  .card{
    background:var(--card);border:2px solid var(--border);border-radius:20px;box-shadow:var(--shadow);
    padding:20px;text-align:center;transition:.25s
  }
  .card:hover{transform:translateY(-4px);background:#F5F5DC;color:#3e3e3e}
  .card h3{margin:0 0 10px;font-size:1.6rem}
  .card p{color:var(--muted);line-height:1.7;margin:0 0 14px}
  .info{
    display:flex;justify-content:space-between;align-items:center;background:var(--chip);border-radius:12px;
    padding:10px 14px;font-weight:800;margin-bottom:10px
  }
  .btn{display:inline-block;padding:10px 14px;border:none;border-radius:10px;font-weight:800;cursor:pointer;text-decoration:none}
  .primary{background:var(--accent);color:#fff}
  .primary:hover{background:var(--accent-hover)}
  /* زر الإضافة إلى السلة */
.add-to-cart {
  background-color: #4a675a; /* أخضر مطفي ناعم */
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 14px;
  font-family: "Tajawal", sans-serif; /* نفس الخط المستخدم */
  font-weight: 700;
  cursor: pointer;
  transition: background-color 0.3s;
  text-decoration: none;
  display: inline-block;
  text-align: center;
}

/* زر البحث */
#searchBtn {
  background-color: #5A8DA8;         /* نفس لون عرض التفاصيل */
  color: #fff;
  font-family: "Tajawal", sans-serif;
  font-weight: 700;
  border: none;
  border-radius: 10px;
  padding: 10px 18px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
#searchBtn:hover {
  background-color: #4F7E97;
}


.add-to-cart:hover {
  background-color: #3e594f;           /* أغمق شوي عند المرور */
}



  .success{background:#198754;color:#fff}
  .success:hover{filter:brightness(.95)}
  .site-footer {
    background: #d8d5d0;
    border-top: 2px solid #b9b6b2;
    padding: 15px;
    text-align: center;
    color: #4b4b4b;
    font-size: 15px;
    box-shadow: 0 -2px 6px rgba(0,0,0,0.05);
  }
    .footer-email {
    color: #3e3e3e;
    text-decoration: none;
    font-weight: bold;
  }
  .separator {
    margin: 0 8px;
    color: #999;
  }
</style>
</head>
<body>
<header class="site-header">
  <!-- شعار الموقع -->
    <img src="image/logo.jpg" alt="شعار مِهَن" class="logo">

  <!-- زر الخروج -->
  <a href="index.html" aria-label="تسجيل الخروج" class="logout-btn">
    <img src="image/logout.png" alt="خروج">
  </a>
</header>


<main>
  <!-- شريط الأدوات -->
  <div class="toolbar">
    <div class="search">
      <input id="q" type="search" placeholder="ابحث عن خدمة… (كهرباء، سباكة، تنظيف…)">
      <button id="searchBtn" type="button">بحث</button>
    </div>

    <div class="filters">
      <select id="typeFilter">
        <!-- يُملأ تلقائيًا بالأنواع -->
      </select>
    </div>

<div style="display:flex; gap:10px; align-items:center;">
  <a class="cart-btn orders" href="requests.html">📄 قائمة الطلبات</a>
<button id="addToCartBtn" class="btn">طلب الخدمة</button></div>


  </div>

  <!-- الشبكة -->
  <section class="grid" id="grid"></section>
</main>

<footer class="site-footer">
  <a href="mailto:contact@mihan.sa" class="footer-email">contact@mihan.sa</a>
  <span class="separator">•</span>
  <span>© 2025 مِهَن — جميع الحقوق محفوظة</span>
</footer>

<script>
/* =========================
   1) بيانات ثابتة: 17 خدمة
   ========================= */
const services = [
  // صيانة المنازل
  {id:1,  title:"🔧 سباكة",                  type:"صيانة المنازل", price:250, time:"4:00",  desc:"إصلاح وصيانة الأنابيب، تسليك المجاري، وتركيب صنابير ومحابس المياه."},
  {id:2,  title:"💡 كهرباء",                 type:"صيانة المنازل", price:180, time:"5:44", desc:"صيانة وإصلاح الأعطال الكهربائية المنزلية وتركيب المفاتيح والمخارج."},
  {id:3,  title:"❄️ تكييف",                  type:"صيانة المنازل", price:190, time:"4:00", desc:"تنظيف وفحص المكيفات وإصلاح التسريبات وتبديل الفلاتر."},
  {id:4,  title:"🧱 دهانات وصيانة عامة",     type:"صيانة المنازل", price:120, time:"3:40", desc:"أعمال صيانة منزلية عامة مع تحسينات وتشطيب بسيط."},

  // التنظيف
  {id:5,  title:"🧹 تنظيف المنازل",           type:"التنظيف",       price:80,  time:"7:00", desc:"تنظيف شامل للغرف والمطابخ والحمامات وإزالة الغبار."},
  {id:6,  title:"🧽 تنظيف المكاتب",           type:"التنظيف",       price:50,  time:"2:00", desc:"تنظيف المكاتب والأسطح وتعقيم الأدوات."},

  // خدمات السيارات
  {id:7,  title:"🧼 غسيل السيارة",           type:"خدمات السيارات", price:60,  time:"3:40", desc:"غسيل شامل للسيارة من الداخل والخارج في موقع العميل."},
  {id:8,  title:"🚗 تبديل الإطارات",          type:"خدمات السيارات", price:40,  time:"2:00", desc:"تبديل وتركيب الإطارات وخدمة بنشر متنقلة."},
  {id:9,  title:"🔧 صيانة سريعة",             type:"خدمات السيارات", price:40,  time:"9:00", desc:"إصلاحات بسيطة مثل المصابيح والزيوت."},

  // صيانة الأجهزة
  {id:10, title:"📱 إصلاح الهواتف",          type:"صيانة الأجهزة",  price:110, time:"2:00", desc:"صيانة هواتف مع استبدال البطارية أو الشاشة."},
  {id:11, title:"💻 إصلاح الحواسيب",         type:"صيانة الأجهزة",  price:120, time:"3:40", desc:"تنظيف الفيروسات/ترقية القطع/إصلاح الأعطال."},
  {id:12, title:"📺 إصلاح شاشات وأجهزة",     type:"صيانة الأجهزة",  price:170, time:"10:00",desc:"صيانة الأجهزة الإلكترونية المنزلية."},

  // التوصيل
  {id:13, title:"🚚 توصيل الطلبات",           type:"التوصيل",        price:80,  time:"12:00",desc:"توصيل مستلزمات وطلبات داخل المدينة بسرعة."},

  // الخدمات الشخصية / الضيافة / الطهي
  {id:14, title:"🚕 المشاوير الشخصية",        type:"الخدمات الشخصية", price:100, time:"3:40", desc:"نقل شخصي لمشاوير عاجلة بموثوقية."},
  {id:15, title:"🍳 الطهي المنزلي",           type:"الخدمات الشخصية", price:200, time:"5:00",  desc:"إعداد وجبات منزلية حسب الطلب."},
  {id:16, title:"☕ الضيافة",                 type:"الخدمات الشخصية", price:200, time:"3:40",  desc:"تنظيم الضيافة للمناسبات الصغيرة."},
  {id:17, title:"💄 خدمات التجميل المنزلية",  type:"الخدمات الشخصية", price:200, time:"5:00",  desc:"تجميل منزلي: تصفيف شعر ومكياج وعناية بالبشرة."},
];

/* ============
   2) سلة الشراء
   ============ */
const CART_KEY = 'cart';
function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }catch{ return []; } }
function setCart(arr){ localStorage.setItem(CART_KEY, JSON.stringify(arr)); updateCartCount(); }
function addToCart(id){
  const s = services.find(x=>x.id===id);
  if(!s) return;
  const cart = getCart();
  // لو موجود نزود الكمية، وإلا نضيف عنصر جديد
  const i = cart.findIndex(x=>x.id===id);
  if(i>-1) cart[i].qty += 1; else cart.push({id:s.id,title:s.title,price:s.price,qty:1});
  setCart(cart);
  alert('✅ تمت إضافة الخدمة إلى السلة');
}
function updateCartCount(){
  const count = getCart().reduce((sum,i)=>sum+i.qty,0);
  document.getElementById('cartCount').textContent = count;
}

/* =========================
   3) بناء الفلاتر والبطاقات
   ========================= */
const grid = document.getElementById('grid');
const q    = document.getElementById('q');
const btn  = document.getElementById('searchBtn');
const typeSel = document.getElementById('typeFilter');

// بناء قائمة الأنواع
const types = [...new Set(services.map(s=>s.type))];
typeSel.innerHTML = `<option value="">كل الفئات</option>` + types.map(t=>`<option value="${t}">${t}</option>`).join('');

let state = {q:'', type:''};

function render(){
  grid.innerHTML = '';
  const list = services.filter(s=>{
    const byQ = !state.q || (s.title+s.desc+s.type).toLowerCase().includes(state.q);
    const byT = !state.type || s.type === state.type;
    return byQ && byT;
  });
  
  

  list.forEach(s=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3>${s.title}</h3>
      <div class="info">
        <span>⏱️ ${s.time}</span>
        <span>💰 ${s.price} ر.س</span>
      </div>
      <div style="display:flex;gap:8px;justify-content:center">
        <a class="btn primary" href="details.html?id=${s.id}">عرض التفاصيل</a>
   <button class="add-to-cart" onclick="addToCart(${s.id})">إضافة إلى السلة</button>


    `;
    grid.appendChild(card);
  });
}

// أحداث
btn.addEventListener('click', ()=>{ state.q = q.value.trim().toLowerCase(); render(); });
q.addEventListener('input', ()=>{ state.q = q.value.trim().toLowerCase(); render(); });
typeSel.addEventListener('change', ()=>{ state.type = typeSel.value; render(); });

// أول تحميل
updateCartCount();
render();

// نحفظ الخدمات للـ details.html (يقرأها من localStorage)
localStorage.setItem('services', JSON.stringify(services));
// عند الضغط على زر طلب الخدمة، نضيفها للسلة
document.getElementById('addToCartBtn').addEventListener('click', () => {
  // نحاول نقرأ السلة القديمة
  const cart = JSON.parse(localStorage.getItem('cart') || '[]');

  // نتحقق إذا كانت الخدمة موجودة مسبقاً (حسب id)
  const exists = cart.find(item => item.id === s.id);

  if (!exists) {
    cart.push({
      id: s.id,
      title: s.title,
      price: s.price,
      time: s.time,
      emoji: s.emoji || '🧰',
      description: s.description,
      qty: 1
    });
    localStorage.setItem('cart', JSON.stringify(cart));
    alert('✅ تمت إضافة الخدمة إلى السلة بنجاح!');
  } else {
    alert('🛒 الخدمة موجودة مسبقاً في السلة.');
  }

  // تحويل المستخدم مباشرة إلى صفحة السلة
  window.location.href = 'cart.html';
});


</script>
</body>
</html>

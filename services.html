<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù…ÙÙ‡ÙÙ† | Ø§Ù„Ø®Ø¯Ù…Ø§Øª</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#e9e6e2;
    --card:#fff;
    --text:#2d2d2d;
    --muted:#555;
    --chip:#E6D5B8;
    --accent:#5A8DA8;          /* Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ù†Ø§Ø¹Ù… */
    --accent-hover:#4F7E97; 
    --danger:#C62828;
    --danger-hover:#A61717;
    --border:#8B4513;         /* Ø§Ù„Ø¨Ù†ÙŠ Ø§Ù„ØºØ§Ù…Ù‚ Ù…Ø«Ù„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠØ¯Ø± */
    --radius:20px;
    --shadow:0 4px 12px rgba(0,0,0,.08);
  }

  *{box-sizing:border-box}
  body{font-family:"Tajawal",sans-serif;background:var(--bg);margin:0;color:var(--text);}

  /* ===== Header ===== */
  .site-header {
    background: #d8d5d0;
    border-bottom: 2px solid #b9b6b2;
    padding: 15px 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    position: relative;
  }
  .logo { width: 120px; }
  .logout-btn {
    position: absolute; right: 20px; top: 50%; transform: translateY(-50%);
  }
  .logout-btn img { width: 55px; height: 55px; cursor: pointer; transition: transform .3s; }
  .logout-btn img:hover { transform: scale(1.1); }

  main{padding:24px;max-width:1200px;margin:auto}

  /* ===== Toolbar ===== */
  .toolbar{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:16px}
  .search{display:flex;gap:8px;align-items:center}
  .search input{
    padding:12px 14px;border:1px solid #ccc;border-radius:12px;min-width:260px;font-size:15px
  }
  #searchBtn{
    background-color: var(--accent);
    color:#fff;border:none;border-radius:10px;padding:10px 18px;cursor:pointer;
    font-family:"Tajawal",sans-serif;font-weight:700;transition:.2s
  }
  #searchBtn:hover{background:#4F7E97}

  .filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .filters select, .filters input{
    padding:10px 12px;border:1px solid #ccc;border-radius:12px;background:#fff;min-width:140px;
    font-weight:700;color:#444
  }
  #clearAll{
    background:#777;color:#fff;border:none;border-radius:10px;padding:10px 16px;cursor:pointer;font-weight:700
  }

  .cart-btn{
    padding:10px 14px;border-radius:12px;background:#2d2d2d;color:#fff;text-decoration:none;font-weight:800;display:inline-flex;align-items:center;gap:8px
  }
  .cart-btn.orders{ background: var(--accent); }
  .cart-btn.orders:hover{ background: var(--accent-hover); }
  .badge{background:#ff5252;color:#fff;border-radius:999px;padding:2px 8px;font-size:.85rem}

  /* ===== Cards Grid ===== */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:22px}
  .card{
    background:var(--card);border:2px solid var(--border);border-radius:20px;box-shadow:var(--shadow);
    padding:20px;text-align:center;transition:.25s
  }
  .card:hover{transform:translateY(-4px);background:#F5F5DC;color:#3e3e3e}
  .card h3{margin:0 0 10px;font-size:1.6rem}
  .info{
    display:flex;justify-content:space-between;align-items:center;background:var(--chip);border-radius:12px;
    padding:10px 14px;font-weight:800;margin-bottom:10px
  }
  .btn{display:inline-block;padding:10px 14px;border:none;border-radius:10px;font-weight:800;cursor:pointer;text-decoration:none}
  .primary{background:var(--accent);color:#fff}
  .primary:hover{background:var(--accent-hover)}
  .add-to-cart{
    background-color:#4a675a;color:#fff;border:none;border-radius:10px;padding:10px 14px;
    font-family:"Tajawal",sans-serif;font-weight:700;cursor:pointer;transition:.2s
  }
  .add-to-cart:hover{ background:#3e594f }

  /* Empty state */
  .empty-state{
    background:#fff;border:2px dashed #b9b6b2;border-radius:16px;padding:28px;text-align:center;color:#666;
    box-shadow:0 4px 12px rgba(0,0,0,.06);grid-column:1 / -1
  }
  .empty-state .hint{margin-top:6px;font-size:.95rem;color:#888}
  .empty-state .btn{margin-top:12px}

  /* ===== Footer ===== */
  .site-footer {
    background: #d8d5d0; border-top: 2px solid #b9b6b2; padding: 15px; text-align: center;
    color: #4b4b4b; font-size: 15px; box-shadow: 0 -2px 6px rgba(0,0,0,0.05);
  }
  .footer-email { color:#3e3e3e; text-decoration:none; font-weight:bold }
  .separator { margin:0 8px; color:#999 }
</style>
</head>
<body>
<header class="site-header">
  <img src="image/logo.jpg" alt="Ø´Ø¹Ø§Ø± Ù…ÙÙ‡ÙÙ†" class="logo">
  <a href="index.html" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬" class="logout-btn">
    <img src="image/logout.png" alt="Ø®Ø±ÙˆØ¬">
  </a>
</header>

<main>
  <div class="toolbar">
    <!-- Ø§Ù„Ø¨Ø­Ø« -->
    <div class="search">
      <input id="q" type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø©â€¦ (ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ø³Ø¨Ø§ÙƒØ©ØŒ ØªÙ†Ø¸ÙŠÙâ€¦)">
      <button id="searchBtn" type="button">Ø¨Ø­Ø«</button>
    </div>

    <!-- Ø§Ù„ÙÙ„Ø§ØªØ± -->
    <div class="filters">
      <select id="typeFilter" title="Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©"></select>

      <span>Ø§Ù„Ø³Ø¹Ø± Ù…Ù†</span>
      <input id="priceMin" type="number" min="0" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰" style="width:120px">
      <span>Ø¥Ù„Ù‰</span>
      <input id="priceMax" type="number" min="0" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰" style="width:120px">

      <select id="ratingMin" title="Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ù†Ù‰">
        <option value="">ÙƒÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</option>
        <option value="3">3 â˜… ÙˆÙ…Ø§ ÙÙˆÙ‚</option>
        <option value="4">4 â˜… ÙˆÙ…Ø§ ÙÙˆÙ‚</option>
        <option value="4.5">4.5 â˜… ÙˆÙ…Ø§ ÙÙˆÙ‚</option>
      </select>

      <button id="clearAll" type="button">Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±</button>
    </div>

    <!-- Ø±ÙˆØ§Ø¨Ø· -->
    <div style="display:flex; gap:10px; align-items:center; margin-inline-start:auto;">
      <a class="cart-btn orders" href="requests.html">ğŸ“„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
      <a class="cart-btn" href="chart.html" id="cartBtn">ğŸ›’ Ø§Ù„Ø³Ù„Ø© <span class="badge" id="cartCount">0</span></a>
    </div>
  </div>

  <!-- Ø§Ù„Ø´Ø¨ÙƒØ© -->
  <section class="grid" id="grid"></section>
</main>

<footer class="site-footer">
  <a href="mailto:contact@mihan.sa" class="footer-email">contact@mihan.sa</a>
  <span class="separator">â€¢</span>
  <span>Â© 2025 Ù…ÙÙ‡ÙÙ† â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</span>
</footer>

<script>
/* =========================
   1) Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Ù…Ø¶Ø§Ù rating Ù„ØªÙØ¹ÙŠÙ„ ÙÙ„ØªØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…)
   ========================= */
const services = [
  // ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„
  {id:1,  title:"ğŸ”§ Ø³Ø¨Ø§ÙƒØ©",                  type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„", price:250, time:"4:00",  desc:"Ø¥ØµÙ„Ø§Ø­ ÙˆØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ØŒ ØªØ³Ù„ÙŠÙƒ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠØŒ ÙˆØªØ±ÙƒÙŠØ¨ ØµÙ†Ø§Ø¨ÙŠØ± ÙˆÙ…Ø­Ø§Ø¨Ø³ Ø§Ù„Ù…ÙŠØ§Ù‡.", rating:4.4},
  {id:2,  title:"ğŸ’¡ ÙƒÙ‡Ø±Ø¨Ø§Ø¡",                 type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„", price:180, time:"5:44", desc:"ØµÙŠØ§Ù†Ø© ÙˆØ¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© ÙˆØªØ±ÙƒÙŠØ¨ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ÙˆØ§Ù„Ù…Ø®Ø§Ø±Ø¬.", rating:4.5},
  {id:3,  title:"â„ï¸ ØªÙƒÙŠÙŠÙ",                  type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„", price:190, time:"4:00", desc:"ØªÙ†Ø¸ÙŠÙ ÙˆÙØ­Øµ Ø§Ù„Ù…ÙƒÙŠÙØ§Øª ÙˆØ¥ØµÙ„Ø§Ø­ Ø§Ù„ØªØ³Ø±ÙŠØ¨Ø§Øª ÙˆØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ±.", rating:4.2},
  {id:4,  title:"ğŸ§± Ø¯Ù‡Ø§Ù†Ø§Øª ÙˆØµÙŠØ§Ù†Ø© Ø¹Ø§Ù…Ø©",     type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„", price:120, time:"3:40", desc:"Ø£Ø¹Ù…Ø§Ù„ ØµÙŠØ§Ù†Ø© Ù…Ù†Ø²Ù„ÙŠØ© Ø¹Ø§Ù…Ø© Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª ÙˆØªØ´Ø·ÙŠØ¨ Ø¨Ø³ÙŠØ·.", rating:4.0},

  // Ø§Ù„ØªÙ†Ø¸ÙŠÙ
  {id:5,  title:"ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø²Ù„",           type:"Ø§Ù„ØªÙ†Ø¸ÙŠÙ",       price:80,  time:"7:00", desc:"ØªÙ†Ø¸ÙŠÙ Ø´Ø§Ù…Ù„ Ù„Ù„ØºØ±Ù ÙˆØ§Ù„Ù…Ø·Ø§Ø¨Ø® ÙˆØ§Ù„Ø­Ù…Ø§Ù…Ø§Øª ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„ØºØ¨Ø§Ø±.", rating:4.1},
  {id:6,  title:"ğŸ§½ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙƒØ§ØªØ¨",           type:"Ø§Ù„ØªÙ†Ø¸ÙŠÙ",       price:50,  time:"2:00", desc:"ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙƒØ§ØªØ¨ ÙˆØ§Ù„Ø£Ø³Ø·Ø­ ÙˆØªØ¹Ù‚ÙŠÙ… Ø§Ù„Ø£Ø¯ÙˆØ§Øª.", rating:3.9},

  // Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª
  {id:7,  title:"ğŸ§¼ ØºØ³ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©",           type:"Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª", price:60,  time:"3:40", desc:"ØºØ³ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø³ÙŠØ§Ø±Ø© Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ ÙˆØ§Ù„Ø®Ø§Ø±Ø¬ ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„.", rating:4.3},
  {id:8,  title:"ğŸš— ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª",          type:"Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª", price:40,  time:"2:00", desc:"ØªØ¨Ø¯ÙŠÙ„ ÙˆØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª ÙˆØ®Ø¯Ù…Ø© Ø¨Ù†Ø´Ø± Ù…ØªÙ†Ù‚Ù„Ø©.", rating:4.0},
  {id:9,  title:"ğŸ”§ ØµÙŠØ§Ù†Ø© Ø³Ø±ÙŠØ¹Ø©",             type:"Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª", price:40,  time:"9:00", desc:"Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø¨Ø³ÙŠØ·Ø© Ù…Ø«Ù„ Ø§Ù„Ù…ØµØ§Ø¨ÙŠØ­ ÙˆØ§Ù„Ø²ÙŠÙˆØª.", rating:3.8},

  // ØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
  {id:10, title:"ğŸ“± Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù‡ÙˆØ§ØªÙ",          type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©",  price:110, time:"2:00", desc:"ØµÙŠØ§Ù†Ø© Ù‡ÙˆØ§ØªÙ Ù…Ø¹ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© Ø£Ùˆ Ø§Ù„Ø´Ø§Ø´Ø©.", rating:4.4},
  {id:11, title:"ğŸ’» Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø­ÙˆØ§Ø³ÙŠØ¨",         type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©",  price:120, time:"3:40", desc:"ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙÙŠØ±ÙˆØ³Ø§Øª/ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù‚Ø·Ø¹/Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„.", rating:4.6},
  {id:12, title:"ğŸ“º Ø¥ØµÙ„Ø§Ø­ Ø´Ø§Ø´Ø§Øª ÙˆØ£Ø¬Ù‡Ø²Ø©",     type:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©",  price:170, time:"10:00",desc:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©.", rating:4.2},

  // Ø§Ù„ØªÙˆØµÙŠÙ„
  {id:13, title:"ğŸšš ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",           type:"Ø§Ù„ØªÙˆØµÙŠÙ„",        price:80,  time:"12:00",desc:"ØªÙˆØµÙŠÙ„ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª ÙˆØ·Ù„Ø¨Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø³Ø±Ø¹Ø©.", rating:4.1},

  // Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© / Ø§Ù„Ø¶ÙŠØ§ÙØ© / Ø§Ù„Ø·Ù‡ÙŠ
  {id:14, title:"ğŸš• Ø§Ù„Ù…Ø´Ø§ÙˆÙŠØ± Ø§Ù„Ø´Ø®ØµÙŠØ©",        type:"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©", price:100, time:"3:40", desc:"Ù†Ù‚Ù„ Ø´Ø®ØµÙŠ Ù„Ù…Ø´Ø§ÙˆÙŠØ± Ø¹Ø§Ø¬Ù„Ø© Ø¨Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©.", rating:4.0},
  {id:15, title:"ğŸ³ Ø§Ù„Ø·Ù‡ÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ",           type:"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©", price:200, time:"5:00",  desc:"Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ¬Ø¨Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨.", rating:4.3},
  {id:16, title:"â˜• Ø§Ù„Ø¶ÙŠØ§ÙØ©",                 type:"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©", price:200, time:"3:40",  desc:"ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¶ÙŠØ§ÙØ© Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©.", rating:4.2},
  {id:17, title:"ğŸ’„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ¬Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©",  type:"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©", price:200, time:"5:00",  desc:"ØªØ¬Ù…ÙŠÙ„ Ù…Ù†Ø²Ù„ÙŠ: ØªØµÙÙŠÙ Ø´Ø¹Ø± ÙˆÙ…ÙƒÙŠØ§Ø¬ ÙˆØ¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø©.", rating:4.5},
];

/* ============
   2) Ø§Ù„Ø³Ù„Ø©: Ø¹Ø¯Ù‘Ø§Ø¯ + Ø¥Ø¶Ø§ÙØ©
   ============ */
const CART_KEY = 'cart';
function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }catch{ return []; } }
function setCart(arr){ localStorage.setItem(CART_KEY, JSON.stringify(arr)); updateCartCount(); }
function addToCart(id){
  const s = services.find(x=>x.id===id);
  if(!s) return;
  const cart = getCart();
  const i = cart.findIndex(x=>x.id===id);
  if(i>-1) cart[i].qty += 1;
  else cart.push({id:s.id,title:s.title,price:s.price,time:s.time,emoji:'ğŸ§°',description:s.desc,qty:1});
  setCart(cart);
  alert('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
}
function updateCartCount(){
  const count = getCart().reduce((sum,i)=>sum+i.qty,0);
  const badge = document.getElementById('cartCount');
  if(badge) badge.textContent = count;
}

/* =========================
   3) Ø§Ù„ÙÙ„Ø§ØªØ± ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª + Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙŠÙˆØ²Ø± Ø³ØªÙˆØ±ÙŠ
   ========================= */
const grid   = document.getElementById('grid');
const q      = document.getElementById('q');
const btn    = document.getElementById('searchBtn');
const typeEl = document.getElementById('typeFilter');
const minEl  = document.getElementById('priceMin');
const maxEl  = document.getElementById('priceMax');
const rateEl = document.getElementById('ratingMin');
const clearAll = document.getElementById('clearAll');

// Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù†ÙˆØ§Ø¹
// Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ (Ø£Ø¶ÙÙ†Ø§ ÙØ¦Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù„Ø§ Ø®Ø¯Ù…Ø§Øª Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹")
const types = [...new Set(services.map(s=>s.type))];
types.push('Ø§Ù„Ø²Ø±Ø§Ø¹Ø©'); // 
typeEl.innerHTML = `<option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>` + types.map(t=>`<option value="${t}">${t}</option>`).join('');


let state = { q:'', type:'', min:null, max:null, rating:null };

function showEmpty(message){
  grid.innerHTML = `
    <div class="empty-state">
      <div>ğŸ” ${message}</div>
      <div class="hint">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±.</div>
      <button class="btn primary" id="clearFiltersNow">Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±</button>
    </div>
  `;
  document.getElementById('clearFiltersNow').onclick = clearFilters;
}

function clearFilters(){
  state = { q:'', type:'', min:null, max:null, rating:null };
  q.value=''; typeEl.value=''; minEl.value=''; maxEl.value=''; rateEl.value='';
  render();
}

function render(){
  grid.innerHTML = '';

  // 1) Ø¨Ø­Ø«
  const query = (state.q||'').toLowerCase();
  const afterSearch = services.filter(s=>{
    if(!query) return true;
    return (s.title + ' ' + (s.desc||'') + ' ' + s.type).toLowerCase().includes(query);
  });
  if(query && afterSearch.length === 0){
    showEmpty('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬.');
    return;
  }

  // 2) Ù†ÙˆØ¹
 const afterType = services.filter(s => !state.type || s.type === state.type);
  if (state.type && afterType.length === 0){
    showEmpty('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹.');
    return;
  }

  // 3) Ø³Ø¹Ø±
  const min = state.min!=='' && state.min!=null ? Number(state.min) : null;
  const max = state.max!=='' && state.max!=null ? Number(state.max) : null;
  const afterPrice = afterType.filter(s=>{
    const p = Number(s.price)||0;
    if(min!=null && p < min) return false;
    if(max!=null && p > max) return false;
    return true;
  });
  if((min!=null || max!=null) && afterPrice.length === 0){
    showEmpty('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±ÙŠ.');
    return;
  }

  // 4) ØªÙ‚ÙŠÙŠÙ…
  const rate = state.rating!=='' && state.rating!=null ? Number(state.rating) : null;
  const afterRate = afterPrice.filter(s=>{
    const r = Number(s.rating||0);
    if(rate!=null && r < rate) return false;
    return true;
  });
  if(rate!=null && afterRate.length === 0){
    showEmpty('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙ.');
    return;
  }

  if(afterRate.length === 0){
    showEmpty('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.');
    return;
  }

  // Ø¨Ø·Ø§Ù‚Ø§Øª
  afterRate.forEach(s=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3>${s.title}</h3>
      <div class="info">
        <span>â±ï¸ ${s.time}</span>
        <span>ğŸ’° ${s.price} Ø±.Ø³</span>
      </div>
      <div style="display:flex;gap:8px;justify-content:center">
        <a class="btn primary" href="details.html?id=${s.id}">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</a>
        <button class="add-to-cart" onclick="addToCart(${s.id})">Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
      </div>
    `;
    grid.appendChild(card);
  });
}

// Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
btn.addEventListener('click', ()=>{
  const val = q.value.trim();
  if(!val){ alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØµØ·Ù„Ø­ Ø¨Ø­Ø«'); q.focus(); return; }
  state.q = val.toLowerCase(); render();
});
q.addEventListener('input', ()=>{ state.q = q.value.trim().toLowerCase(); render(); });
typeEl.addEventListener('change', ()=>{ state.type = typeEl.value; render(); });
minEl.addEventListener('input', ()=>{ state.min = minEl.value; render(); });
maxEl.addEventListener('input', ()=>{ state.max = maxEl.value; render(); });
rateEl.addEventListener('change', ()=>{ state.rating = rateEl.value; render(); });
clearAll.addEventListener('click', clearFilters);

// Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù„Ù„Ø¯ÙŠØªÙ„Ø²
localStorage.setItem('services', JSON.stringify(services));

// Ø£ÙˆÙ„ ØªØ­Ù…ÙŠÙ„
updateCartCount();
render();
</script>
</body>
</html>

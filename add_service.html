<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إضافة خدمة جديدة</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="mihn_style.css">
<style>
    body { font-family: Arial;  margin:0; padding:0; min-height:100vh;}
    main { padding:30px; display:flex; justify-content:center; flex:1;}
    form { background:#f0f0f0; padding:30px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.15); width:400px; display:flex; flex-direction:column; }
    label { margin:15px 0 5px; color:#333; font-weight:bold; }
    input, select { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; box-sizing:border-box; }
    button {
        margin-top:20px; width:100%; padding:12px;
        background: var(--accent, #007BFF);
        color: var(--white, #fff);
        border:none; border-radius:8px;
        font-weight:bold; cursor:pointer; transition:0.3s;
    }
    button:hover { background:#555; }
    .msg { text-align:center; font-weight:bold; margin-bottom:15px; }
</style>
</head>
<body>

<header class="site-header">
  <div class="brand">
    <a href="index.html" aria-label="الصفحة الرئيسية">
      <img src="assets/logo.jpg" alt="شعار مِهَن" class="logo" style="width:100px;">
    </a>
  </div>
</header>

<main>
  <form id="addServiceForm">
    <div class="msg" id="message"></div>

    <label>اسم الخدمة:</label>
    <input type="text" id="serviceName" required>

    <label>الوصف:</label>
    <input type="text" id="serviceDescription" required>

    <label>السعر (ريال):</label>
    <input type="number" id="servicePrice" required>

    <label>الوقت المتوقع (بالساعات):</label>
    <input type="text" id="serviceTime" required>

    <label>نوع الخدمة:</label>
    <select id="serviceType" required>
        <option value="">اختر النوع</option>
        <option value="صيانه المنازل">صيانه المنازل</option>
        <option value="التنظيف">التنظيف</option>
        <option value="خدمات السيارات">خدمات السيارات</option>
        <option value="صيانه الاجهزه">صيانه الاجهزه</option>
        <option value="التوصيل">التوصيل</option>
        <option value="الخدمات الشخصيه">الخدمات الشخصيه</option>
    </select>

    <button type="submit">إضافة الخدمة</button>
  </form>
</main>

<footer class="site-footer" role="contentinfo" aria-label="تذييل الموقع">
  <div class="footer-inner">
    <a href="mailto:contact@mihan.sa" class="footer-email">contact@mihn.sa</a>
    <span class="separator">•</span>
    <span>© 2025 مِهَن — جميع الحقوق محفوظة</span>
  </div>
</footer>

<script>
const form = document.getElementById('addServiceForm');
const msg = document.getElementById('message');

form.addEventListener('submit', e => {
  e.preventDefault();

  // جلب القيم من الحقول
  const name = document.getElementById('serviceName').value.trim();
  const desc = document.getElementById('serviceDescription').value.trim();
  const price = document.getElementById('servicePrice').value.trim();
  const time = document.getElementById('serviceTime').value.trim();
  const type = document.getElementById('serviceType').value.trim();

  if (!name || !desc || !price || !time || !type) {
    showMessage("❌ يرجى تعبئة جميع الحقول.", true);
    return;
  }

  // جلب الخدمات القديمة من localStorage
  let services = JSON.parse(localStorage.getItem('services')) || [];

  // إنشاء كائن الخدمة الجديدة
  const newService = {
    id: Date.now(),
    title: name,
    description: desc,
    price: price,
    time: time,
    type: type
  };

  // إضافة للخدمات وتخزينها
  services.push(newService);
  localStorage.setItem('services', JSON.stringify(services));

  showMessage("✅ تمت إضافة الخدمة بنجاح!");

  // بعد ثانيتين، الانتقال للصفحة الرئيسية
  setTimeout(() => {
    window.location.href = "provider.html";
  }, 2000);
});

function showMessage(text, isError = false) {
  msg.textContent = text;
  msg.style.color = isError ? "red" : "green";
}
</script>
</body>
</html>
